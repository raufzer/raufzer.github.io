---
import Pattern from "@/components/ui/pattern.astro";
import PageLayout from "@/layouts/page-layout.astro";
import Box from "@/components/box/index.astro";
import BoxHeader from "@/components/box/header.astro";
import BoxTitle from "@/components/box/title.astro";
import { getCollection } from "astro:content";
import ProjectItem from "@/components/sections/projects/project-item.astro";

const projects = await getCollection("projects");

const mobileProjects = projects.filter(project => project.data.type === "mobile");
const backendProjects = projects.filter(project => project.data.type === "backend");
const toolsProjects = projects.filter(project => project.data.type === "tools");
const aiProjects = projects.filter(project => project.data.type === "ai");
const communityProjects = projects.filter(project => project.data.type === "community");
---

<PageLayout
  description="Showcasing my software development projects across mobile, backend, AI, tools, and community contributions."
  title="Abd Raouf Zerkhef - Projects"
>
  <Pattern />
  
  {mobileProjects.length > 0 && (
    <Box>
      <BoxHeader>
        <BoxTitle>Mobile Applications ({mobileProjects.length})</BoxTitle>
      </BoxHeader>
      {mobileProjects.map(item => <ProjectItem project={item} />)}
    </Box>
  )}

  {backendProjects.length > 0 && (
    <>
      <Pattern />
      <Box>
        <BoxHeader>
          <BoxTitle>Backend & APIs ({backendProjects.length})</BoxTitle>
        </BoxHeader>
        {backendProjects.map(item => <ProjectItem project={item} />)}
      </Box>
    </>
  )}

  {toolsProjects.length > 0 && (
    <>
      <Pattern />
      <Box>
        <BoxHeader>
          <BoxTitle>Developer Tools ({toolsProjects.length})</BoxTitle>
        </BoxHeader>
        {toolsProjects.map(item => <ProjectItem project={item} />)}
      </Box>
    </>
  )}

  {aiProjects.length > 0 && (
    <>
      <Pattern />
      <Box>
        <BoxHeader>
          <BoxTitle>AI & Machine Learning ({aiProjects.length})</BoxTitle>
        </BoxHeader>
        {aiProjects.map(item => <ProjectItem project={item} />)}
      </Box>
    </>
  )}

  {communityProjects.length > 0 && (
    <>
      <Pattern />
      <Box>
        <BoxHeader>
          <BoxTitle>Community & Open Source ({communityProjects.length})</BoxTitle>
        </BoxHeader>
        {communityProjects.map(item => <ProjectItem project={item} />)}
      </Box>
    </>
  )}
 
  <Pattern />
</PageLayout>
